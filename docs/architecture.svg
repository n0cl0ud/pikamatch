<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 1000" width="1200" height="1000" font-family="'Segoe UI', system-ui, -apple-system, sans-serif">

  <!-- ============================================================ -->
  <!-- DEFINITIONS: gradients, filters, patterns, markers            -->
  <!-- ============================================================ -->
  <defs>
    <!-- Background gradient -->
    <linearGradient id="bgGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#0a0e1a"/>
      <stop offset="50%" stop-color="#0d1220"/>
      <stop offset="100%" stop-color="#0a0f1e"/>
    </linearGradient>

    <!-- Dot grid pattern -->
    <pattern id="dotGrid" x="0" y="0" width="24" height="24" patternUnits="userSpaceOnUse">
      <circle cx="12" cy="12" r="0.8" fill="#1e3a5f" opacity="0.35"/>
    </pattern>

    <!-- Card gradients -->
    <linearGradient id="cardGrad" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#1a2744"/>
      <stop offset="100%" stop-color="#141e35"/>
    </linearGradient>

    <linearGradient id="cardGradSub" x1="0" y1="0" x2="0" y2="1">
      <stop offset="0%" stop-color="#162040"/>
      <stop offset="100%" stop-color="#111a30"/>
    </linearGradient>

    <!-- Node gradients -->
    <linearGradient id="blueNodeGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#4facfe"/>
      <stop offset="100%" stop-color="#3b82f6"/>
    </linearGradient>

    <linearGradient id="pinkNodeGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#fb7185"/>
      <stop offset="100%" stop-color="#e11d48"/>
    </linearGradient>

    <linearGradient id="purpleNodeGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#a78bfa"/>
      <stop offset="100%" stop-color="#7c3aed"/>
    </linearGradient>

    <linearGradient id="orangeNodeGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#fbbf24"/>
      <stop offset="100%" stop-color="#f59e0b"/>
    </linearGradient>

    <linearGradient id="cyanNodeGrad" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#22d3ee"/>
      <stop offset="100%" stop-color="#06b6d4"/>
    </linearGradient>

    <!-- Glow filters -->
    <filter id="blueGlow" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur"/>
      <feColorMatrix in="blur" type="matrix" values="0 0 0 0 0.31  0 0 0 0 0.51  0 0 0 0 0.96  0 0 0 0.45 0" result="glow"/>
      <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>

    <filter id="pinkGlow" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur"/>
      <feColorMatrix in="blur" type="matrix" values="0 0 0 0 0.88  0 0 0 0 0.07  0 0 0 0 0.29  0 0 0 0.45 0" result="glow"/>
      <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>

    <filter id="purpleGlow" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur"/>
      <feColorMatrix in="blur" type="matrix" values="0 0 0 0 0.49  0 0 0 0 0.24  0 0 0 0 0.93  0 0 0 0.45 0" result="glow"/>
      <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>

    <filter id="orangeGlow" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur"/>
      <feColorMatrix in="blur" type="matrix" values="0 0 0 0 0.96  0 0 0 0 0.62  0 0 0 0 0.04  0 0 0 0.45 0" result="glow"/>
      <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>

    <filter id="cyanGlow" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="6" result="blur"/>
      <feColorMatrix in="blur" type="matrix" values="0 0 0 0 0.02  0 0 0 0 0.71  0 0 0 0 0.83  0 0 0 0.45 0" result="glow"/>
      <feMerge><feMergeNode in="glow"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>

    <!-- Drop shadow for cards -->
    <filter id="cardShadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="0" dy="4" stdDeviation="8" flood-color="#000000" flood-opacity="0.4"/>
    </filter>

    <filter id="nodeShadow" x="-10%" y="-10%" width="120%" height="130%">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-color="#000000" flood-opacity="0.5"/>
    </filter>

    <!-- Arrow markers -->
    <marker id="arrowBlue" viewBox="0 0 12 8" refX="11" refY="4" markerWidth="12" markerHeight="8" orient="auto-start-reverse">
      <path d="M0,0 L12,4 L0,8 L3,4 Z" fill="#4facfe"/>
    </marker>

    <marker id="arrowPink" viewBox="0 0 12 8" refX="11" refY="4" markerWidth="12" markerHeight="8" orient="auto-start-reverse">
      <path d="M0,0 L12,4 L0,8 L3,4 Z" fill="#fb7185"/>
    </marker>

    <marker id="arrowCyan" viewBox="0 0 12 8" refX="11" refY="4" markerWidth="12" markerHeight="8" orient="auto-start-reverse">
      <path d="M0,0 L12,4 L0,8 L3,4 Z" fill="#22d3ee"/>
    </marker>

    <marker id="arrowOrange" viewBox="0 0 12 8" refX="11" refY="4" markerWidth="12" markerHeight="8" orient="auto-start-reverse">
      <path d="M0,0 L12,4 L0,8 L3,4 Z" fill="#fbbf24"/>
    </marker>

    <marker id="arrowPurple" viewBox="0 0 12 8" refX="11" refY="4" markerWidth="12" markerHeight="8" orient="auto-start-reverse">
      <path d="M0,0 L12,4 L0,8 L3,4 Z" fill="#a78bfa"/>
    </marker>

    <marker id="arrowWhite" viewBox="0 0 12 8" refX="11" refY="4" markerWidth="12" markerHeight="8" orient="auto-start-reverse">
      <path d="M0,0 L12,4 L0,8 L3,4 Z" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- ============================================================ -->
  <!-- BACKGROUND                                                    -->
  <!-- ============================================================ -->
  <rect width="1200" height="1000" fill="url(#bgGrad)"/>
  <rect width="1200" height="1000" fill="url(#dotGrid)"/>

  <!-- ============================================================ -->
  <!-- TITLE                                                         -->
  <!-- ============================================================ -->
  <text x="600" y="38" text-anchor="middle" fill="#e2e8f0" font-size="22" font-weight="700" letter-spacing="4">DOCKER ARCHITECTURE</text>
  <text x="600" y="58" text-anchor="middle" fill="#64748b" font-size="11" font-weight="500" letter-spacing="6">PIKAMATCH  &#8226;  SERVICE TOPOLOGY</text>

  <!-- Decorative line under title -->
  <line x1="420" y1="68" x2="780" y2="68" stroke="#1e3a5f" stroke-width="1" opacity="0.6"/>
  <line x1="520" y1="68" x2="680" y2="68" stroke="#3b82f6" stroke-width="1.5" opacity="0.5"/>

  <!-- ============================================================ -->
  <!-- HOST MACHINE CARD                                             -->
  <!-- ============================================================ -->
  <g filter="url(#cardShadow)">
    <rect x="380" y="85" width="440" height="90" rx="10" ry="10" fill="url(#cardGrad)" stroke="#1e3a5f" stroke-width="1.2"/>
  </g>
  <!-- Host Machine label -->
  <text x="420" y="106" fill="#64748b" font-size="10" font-weight="600" letter-spacing="2">HOST MACHINE</text>

  <!-- User / Client node -->
  <g filter="url(#blueGlow)">
    <rect x="450" y="115" width="300" height="46" rx="8" ry="8" fill="url(#blueNodeGrad)" opacity="0.92"/>
  </g>
  <text x="600" y="135" text-anchor="middle" fill="#ffffff" font-size="13" font-weight="700">User / Client</text>
  <text x="600" y="152" text-anchor="middle" fill="rgba(255,255,255,0.7)" font-size="10">Browser / API Consumer</text>

  <!-- ============================================================ -->
  <!-- DOCKER NETWORK CARD                                           -->
  <!-- ============================================================ -->
  <g filter="url(#cardShadow)">
    <rect x="50" y="210" width="1100" height="680" rx="12" ry="12" fill="url(#cardGrad)" stroke="#1e3a5f" stroke-width="1.2"/>
  </g>
  <!-- Docker Network label -->
  <text x="100" y="237" fill="#64748b" font-size="10" font-weight="600" letter-spacing="2">DOCKER NETWORK</text>
  <text x="280" y="237" fill="#3b82f6" font-size="10" font-weight="600" letter-spacing="1" opacity="0.7">pikamatch</text>

  <!-- ============================================================ -->
  <!-- GPU SERVICES SUB-CONTAINER                                    -->
  <!-- ============================================================ -->
  <rect x="80" y="255" width="640" height="380" rx="10" ry="10" fill="url(#cardGradSub)" stroke="#1e3a5f" stroke-width="0.8" stroke-dasharray="4,3" opacity="0.7"/>
  <!-- GPU label with icon -->
  <rect x="95" y="265" width="100" height="20" rx="4" ry="4" fill="#e11d48" opacity="0.15"/>
  <text x="145" y="279" text-anchor="middle" fill="#fb7185" font-size="9" font-weight="700" letter-spacing="2">GPU SERVICES</text>

  <!-- clip-api node (Pink) -->
  <g filter="url(#pinkGlow)">
    <rect x="110" y="300" width="270" height="130" rx="10" ry="10" fill="url(#pinkNodeGrad)" opacity="0.15"/>
    <rect x="110" y="300" width="270" height="130" rx="10" ry="10" fill="none" stroke="url(#pinkNodeGrad)" stroke-width="1.5"/>
  </g>
  <!-- Pink accent bar -->
  <rect x="110" y="300" width="4" height="130" rx="2" ry="2" fill="url(#pinkNodeGrad)"/>
  <g filter="url(#nodeShadow)">
    <!-- clip-api icon circle -->
    <circle cx="145" cy="330" r="16" fill="url(#pinkNodeGrad)" opacity="0.25"/>
    <circle cx="145" cy="330" r="16" fill="none" stroke="#fb7185" stroke-width="1.2"/>
    <!-- Simplified GPU/chip icon -->
    <rect x="138" y="323" width="14" height="14" rx="2" fill="none" stroke="#fb7185" stroke-width="1.2"/>
    <line x1="138" y1="328" x2="152" y2="328" stroke="#fb7185" stroke-width="0.8"/>
    <line x1="138" y1="333" x2="152" y2="333" stroke="#fb7185" stroke-width="0.8"/>
    <line x1="145" y1="323" x2="145" y2="337" stroke="#fb7185" stroke-width="0.8"/>
  </g>
  <text x="170" y="327" fill="#fb7185" font-size="14" font-weight="700">clip-api</text>
  <text x="170" y="342" fill="#94a3b8" font-size="10">Matching + Orchestration API</text>
  <text x="130" y="368" fill="#cbd5e1" font-size="11">CLIP ViT-L/14 + pHash + OpenCV</text>
  <text x="130" y="385" fill="#64748b" font-size="10">~1.5 GB VRAM</text>
  <rect x="130" y="398" width="100" height="18" rx="4" ry="4" fill="#fb7185" opacity="0.12"/>
  <text x="180" y="411" text-anchor="middle" fill="#fb7185" font-size="10" font-weight="600">:8002 -> :11434</text>

  <!-- qwen-vl node (Cyan) -->
  <g filter="url(#cyanGlow)">
    <rect x="420" y="300" width="270" height="130" rx="10" ry="10" fill="url(#cyanNodeGrad)" opacity="0.15"/>
    <rect x="420" y="300" width="270" height="130" rx="10" ry="10" fill="none" stroke="url(#cyanNodeGrad)" stroke-width="1.5"/>
  </g>
  <!-- Cyan accent bar -->
  <rect x="420" y="300" width="4" height="130" rx="2" ry="2" fill="url(#cyanNodeGrad)"/>
  <g filter="url(#nodeShadow)">
    <!-- qwen-vl icon circle -->
    <circle cx="455" cy="330" r="16" fill="url(#cyanNodeGrad)" opacity="0.25"/>
    <circle cx="455" cy="330" r="16" fill="none" stroke="#22d3ee" stroke-width="1.2"/>
    <!-- Brain/AI icon -->
    <ellipse cx="455" cy="328" rx="8" ry="6" fill="none" stroke="#22d3ee" stroke-width="1.2"/>
    <path d="M449,332 Q455,340 461,332" fill="none" stroke="#22d3ee" stroke-width="1"/>
    <circle cx="452" cy="327" r="1.5" fill="#22d3ee"/>
    <circle cx="458" cy="327" r="1.5" fill="#22d3ee"/>
  </g>
  <text x="480" y="327" fill="#22d3ee" font-size="14" font-weight="700">qwen-vl</text>
  <text x="480" y="342" fill="#94a3b8" font-size="10">Vision Language Model</text>
  <text x="440" y="368" fill="#cbd5e1" font-size="11">vLLM + Qwen2.5-VL-7B-AWQ</text>
  <text x="440" y="385" fill="#64748b" font-size="10">~5 GB VRAM</text>
  <rect x="440" y="398" width="100" height="18" rx="4" ry="4" fill="#22d3ee" opacity="0.12"/>
  <text x="490" y="411" text-anchor="middle" fill="#22d3ee" font-size="10" font-weight="600">:8000 -> :8001</text>

  <!-- VRAM total badge -->
  <rect x="265" y="448" width="190" height="22" rx="6" ry="6" fill="#0a0e1a" stroke="#1e3a5f" stroke-width="0.8"/>
  <text x="360" y="463" text-anchor="middle" fill="#64748b" font-size="9" font-weight="600" letter-spacing="1">TOTAL ~6.5 GB / 16 GB VRAM</text>

  <!-- ============================================================ -->
  <!-- CPU SERVICES SUB-CONTAINER                                    -->
  <!-- ============================================================ -->
  <rect x="760" y="255" width="360" height="380" rx="10" ry="10" fill="url(#cardGradSub)" stroke="#1e3a5f" stroke-width="0.8" stroke-dasharray="4,3" opacity="0.7"/>
  <!-- CPU label -->
  <rect x="775" y="265" width="100" height="20" rx="4" ry="4" fill="#f59e0b" opacity="0.12"/>
  <text x="825" y="279" text-anchor="middle" fill="#fbbf24" font-size="9" font-weight="700" letter-spacing="2">CPU SERVICES</text>

  <!-- qdrant node (Purple) -->
  <g filter="url(#purpleGlow)">
    <rect x="790" y="300" width="300" height="130" rx="10" ry="10" fill="url(#purpleNodeGrad)" opacity="0.15"/>
    <rect x="790" y="300" width="300" height="130" rx="10" ry="10" fill="none" stroke="url(#purpleNodeGrad)" stroke-width="1.5"/>
  </g>
  <!-- Purple accent bar -->
  <rect x="790" y="300" width="4" height="130" rx="2" ry="2" fill="url(#purpleNodeGrad)"/>
  <g filter="url(#nodeShadow)">
    <!-- qdrant icon circle -->
    <circle cx="825" cy="330" r="16" fill="url(#purpleNodeGrad)" opacity="0.25"/>
    <circle cx="825" cy="330" r="16" fill="none" stroke="#a78bfa" stroke-width="1.2"/>
    <!-- Database icon -->
    <ellipse cx="825" cy="324" rx="8" ry="4" fill="none" stroke="#a78bfa" stroke-width="1.2"/>
    <path d="M817,324 L817,336 Q817,340 825,340 Q833,340 833,336 L833,324" fill="none" stroke="#a78bfa" stroke-width="1.2"/>
    <path d="M817,330 Q817,334 825,334 Q833,334 833,330" fill="none" stroke="#a78bfa" stroke-width="0.8"/>
  </g>
  <text x="850" y="327" fill="#a78bfa" font-size="14" font-weight="700">qdrant</text>
  <text x="850" y="342" fill="#94a3b8" font-size="10">Vector Database</text>
  <text x="810" y="368" fill="#cbd5e1" font-size="11">Semantic Search Engine</text>
  <text x="810" y="385" fill="#64748b" font-size="10">768-dim COSINE index</text>
  <rect x="810" y="398" width="100" height="18" rx="4" ry="4" fill="#a78bfa" opacity="0.12"/>
  <text x="860" y="411" text-anchor="middle" fill="#a78bfa" font-size="10" font-weight="600">:6333 -> :9000</text>

  <!-- ui node (Orange) -->
  <g filter="url(#orangeGlow)">
    <rect x="790" y="470" width="300" height="130" rx="10" ry="10" fill="url(#orangeNodeGrad)" opacity="0.15"/>
    <rect x="790" y="470" width="300" height="130" rx="10" ry="10" fill="none" stroke="url(#orangeNodeGrad)" stroke-width="1.5"/>
  </g>
  <!-- Orange accent bar -->
  <rect x="790" y="470" width="4" height="130" rx="2" ry="2" fill="url(#orangeNodeGrad)"/>
  <g filter="url(#nodeShadow)">
    <!-- ui icon circle -->
    <circle cx="825" cy="500" r="16" fill="url(#orangeNodeGrad)" opacity="0.25"/>
    <circle cx="825" cy="500" r="16" fill="none" stroke="#fbbf24" stroke-width="1.2"/>
    <!-- Browser/UI icon -->
    <rect x="817" y="493" width="16" height="12" rx="2" fill="none" stroke="#fbbf24" stroke-width="1.2"/>
    <line x1="817" y1="498" x2="833" y2="498" stroke="#fbbf24" stroke-width="0.8"/>
    <circle cx="820" cy="496" r="1" fill="#fbbf24"/>
    <circle cx="824" cy="496" r="1" fill="#fbbf24"/>
  </g>
  <text x="850" y="497" fill="#fbbf24" font-size="14" font-weight="700">ui</text>
  <text x="850" y="512" fill="#94a3b8" font-size="10">Web Interface</text>
  <text x="810" y="538" fill="#cbd5e1" font-size="11">Streamlit Dashboard</text>
  <text x="810" y="555" fill="#64748b" font-size="10">Match, Batch, Preview tabs</text>
  <rect x="810" y="568" width="100" height="18" rx="4" ry="4" fill="#fbbf24" opacity="0.12"/>
  <text x="860" y="581" text-anchor="middle" fill="#fbbf24" font-size="10" font-weight="600">:8501 -> :1234</text>

  <!-- ============================================================ -->
  <!-- SHARED VOLUME                                                 -->
  <!-- ============================================================ -->
  <rect x="80" y="490" width="640" height="46" rx="8" ry="8" fill="#0d1220" stroke="#1e3a5f" stroke-width="0.8" stroke-dasharray="3,2"/>
  <!-- Volume icon -->
  <path d="M100,506 L100,524 L112,524 L112,510 L108,506 Z" fill="none" stroke="#475569" stroke-width="1"/>
  <path d="M108,506 L108,510 L112,510" fill="none" stroke="#475569" stroke-width="0.8"/>
  <text x="120" y="518" fill="#475569" font-size="10" font-weight="600">hf_cache</text>
  <text x="185" y="518" fill="#334155" font-size="9">Shared Hugging Face model cache volume  /root/.cache/huggingface</text>

  <!-- ============================================================ -->
  <!-- CONNECTIONS / ARROWS                                          -->
  <!-- ============================================================ -->

  <!-- User -> clip-api  ":11434" -->
  <path d="M510,161 L510,180 Q510,190 470,200 L300,240 Q260,250 245,265 L245,295" stroke="#4facfe" stroke-width="1.8" fill="none" marker-end="url(#arrowPink)" stroke-dasharray="6,3" opacity="0.8"/>
  <rect x="310" y="208" width="56" height="16" rx="4" fill="#0d1220" stroke="#4facfe" stroke-width="0.6" opacity="0.8"/>
  <text x="338" y="219" text-anchor="middle" fill="#4facfe" font-size="8" font-weight="600">:11434</text>

  <!-- User -> ui  ":1234" -->
  <path d="M680,161 L680,180 Q680,195 720,205 L880,245 Q940,260 940,275 L940,465" stroke="#4facfe" stroke-width="1.8" fill="none" marker-end="url(#arrowOrange)" stroke-dasharray="6,3" opacity="0.8"/>
  <rect x="752" y="218" width="48" height="16" rx="4" fill="#0d1220" stroke="#4facfe" stroke-width="0.6" opacity="0.8"/>
  <text x="776" y="229" text-anchor="middle" fill="#4facfe" font-size="8" font-weight="600">:1234</text>

  <!-- User -> qdrant  ":9000" -->
  <path d="M600,161 L600,185 Q600,200 660,210 L920,250 Q990,260 990,280 L990,295" stroke="#4facfe" stroke-width="1.8" fill="none" marker-end="url(#arrowPurple)" stroke-dasharray="6,3" opacity="0.8"/>
  <rect x="700" y="195" width="48" height="16" rx="4" fill="#0d1220" stroke="#4facfe" stroke-width="0.6" opacity="0.8"/>
  <text x="724" y="206" text-anchor="middle" fill="#4facfe" font-size="8" font-weight="600">:9000</text>

  <!-- ui -> clip-api  "REST :8002" -->
  <path d="M790,535 L740,535 Q725,535 710,500 L690,460 Q680,440 600,420 L385,360" stroke="#fbbf24" stroke-width="1.6" fill="none" marker-end="url(#arrowPink)" opacity="0.7"/>
  <rect x="628" y="455" width="72" height="16" rx="4" fill="#0d1220" stroke="#fbbf24" stroke-width="0.6" opacity="0.8"/>
  <text x="664" y="466" text-anchor="middle" fill="#fbbf24" font-size="8" font-weight="600">REST :8002</text>

  <!-- clip-api -> qwen-vl  "/v1/chat/completions" -->
  <path d="M380,365 L400,365 Q410,365 415,365 L420,365" stroke="#fb7185" stroke-width="1.6" fill="none" marker-end="url(#arrowCyan)" opacity="0.8"/>
  <rect x="358" y="373" width="114" height="16" rx="4" fill="#0d1220" stroke="#fb7185" stroke-width="0.6" opacity="0.8"/>
  <text x="415" y="384" text-anchor="middle" fill="#fb7185" font-size="7.5" font-weight="600">/v1/chat/completions</text>

  <!-- clip-api -> qdrant  "gRPC/REST :6333" -->
  <path d="M380,340 L450,340 Q470,340 520,330 Q600,310 700,305 Q750,300 785,310" stroke="#fb7185" stroke-width="1.6" fill="none" marker-end="url(#arrowPurple)" opacity="0.7"/>
  <rect x="560" y="298" width="94" height="16" rx="4" fill="#0d1220" stroke="#fb7185" stroke-width="0.6" opacity="0.8"/>
  <text x="607" y="309" text-anchor="middle" fill="#fb7185" font-size="8" font-weight="600">gRPC/REST :6333</text>

  <!-- ============================================================ -->
  <!-- DEPENDENCY ARROWS (small, inside docker network)              -->
  <!-- ============================================================ -->

  <!-- depends_on indicators -->
  <rect x="80" y="550" width="640" height="88" rx="8" ry="8" fill="#0a0e1a" stroke="#1e3a5f" stroke-width="0.6" opacity="0.5"/>
  <text x="100" y="568" fill="#475569" font-size="9" font-weight="700" letter-spacing="1.5">SERVICE DEPENDENCIES</text>

  <!-- qwen-vl starts first -->
  <circle cx="110" cy="590" r="4" fill="#22d3ee" opacity="0.6"/>
  <text x="120" y="594" fill="#94a3b8" font-size="9">qwen-vl starts first (start_period: 300s)</text>

  <!-- clip-api depends on qwen-vl -->
  <circle cx="110" cy="610" r="4" fill="#fb7185" opacity="0.6"/>
  <text x="120" y="614" fill="#94a3b8" font-size="9">clip-api depends on qwen-vl (start_period: 180s)</text>

  <!-- ui depends on clip-api -->
  <circle cx="110" cy="630" r="4" fill="#fbbf24" opacity="0.6"/>
  <text x="120" y="634" fill="#94a3b8" font-size="9">ui depends on clip-api</text>

  <!-- ============================================================ -->
  <!-- PORT MAPPING TABLE                                            -->
  <!-- ============================================================ -->
  <rect x="80" y="660" width="1040" height="85" rx="8" ry="8" fill="#0a0e1a" stroke="#1e3a5f" stroke-width="0.6" opacity="0.5"/>
  <text x="100" y="678" fill="#475569" font-size="9" font-weight="700" letter-spacing="1.5">PORT MAPPINGS</text>

  <!-- Headers -->
  <text x="120" y="698" fill="#64748b" font-size="9" font-weight="700">SERVICE</text>
  <text x="260" y="698" fill="#64748b" font-size="9" font-weight="700">INTERNAL</text>
  <text x="380" y="698" fill="#64748b" font-size="9" font-weight="700">EXTERNAL</text>
  <text x="500" y="698" fill="#64748b" font-size="9" font-weight="700">PROTOCOL</text>

  <!-- clip-api row -->
  <text x="120" y="716" fill="#fb7185" font-size="9" font-weight="600">clip-api</text>
  <text x="260" y="716" fill="#94a3b8" font-size="9">:8002</text>
  <text x="380" y="716" fill="#94a3b8" font-size="9">:11434</text>
  <text x="500" y="716" fill="#94a3b8" font-size="9">HTTP / REST</text>

  <!-- qwen-vl row -->
  <text x="120" y="732" fill="#22d3ee" font-size="9" font-weight="600">qwen-vl</text>
  <text x="260" y="732" fill="#94a3b8" font-size="9">:8000</text>
  <text x="380" y="732" fill="#94a3b8" font-size="9">:8001</text>
  <text x="500" y="732" fill="#94a3b8" font-size="9">OpenAI-compat API</text>

  <!-- Separator -->
  <line x1="620" y1="688" x2="620" y2="740" stroke="#1e3a5f" stroke-width="0.5"/>

  <!-- qdrant row -->
  <text x="650" y="716" fill="#a78bfa" font-size="9" font-weight="600">qdrant</text>
  <text x="780" y="716" fill="#94a3b8" font-size="9">:6333</text>
  <text x="890" y="716" fill="#94a3b8" font-size="9">:9000</text>
  <text x="990" y="716" fill="#94a3b8" font-size="9">gRPC / REST</text>

  <!-- ui row -->
  <text x="650" y="732" fill="#fbbf24" font-size="9" font-weight="600">ui</text>
  <text x="780" y="732" fill="#94a3b8" font-size="9">:8501</text>
  <text x="890" y="732" fill="#94a3b8" font-size="9">:1234</text>
  <text x="990" y="732" fill="#94a3b8" font-size="9">HTTP / Streamlit</text>

  <!-- ============================================================ -->
  <!-- TECHNOLOGY BADGES                                             -->
  <!-- ============================================================ -->
  <rect x="80" y="762" width="1040" height="45" rx="8" ry="8" fill="#0a0e1a" stroke="#1e3a5f" stroke-width="0.6" opacity="0.5"/>
  <text x="100" y="780" fill="#475569" font-size="9" font-weight="700" letter-spacing="1.5">TECH STACK</text>

  <!-- Tech badges -->
  <rect x="200" y="770" width="60" height="18" rx="4" fill="#fb7185" opacity="0.12"/>
  <text x="230" y="783" text-anchor="middle" fill="#fb7185" font-size="8" font-weight="600">FastAPI</text>

  <rect x="270" y="770" width="45" height="18" rx="4" fill="#fb7185" opacity="0.12"/>
  <text x="292.5" y="783" text-anchor="middle" fill="#fb7185" font-size="8" font-weight="600">CLIP</text>

  <rect x="325" y="770" width="50" height="18" rx="4" fill="#fb7185" opacity="0.12"/>
  <text x="350" y="783" text-anchor="middle" fill="#fb7185" font-size="8" font-weight="600">pHash</text>

  <rect x="385" y="770" width="62" height="18" rx="4" fill="#fb7185" opacity="0.12"/>
  <text x="416" y="783" text-anchor="middle" fill="#fb7185" font-size="8" font-weight="600">PyMuPDF</text>

  <rect x="460" y="770" width="50" height="18" rx="4" fill="#22d3ee" opacity="0.12"/>
  <text x="485" y="783" text-anchor="middle" fill="#22d3ee" font-size="8" font-weight="600">vLLM</text>

  <rect x="520" y="770" width="55" height="18" rx="4" fill="#22d3ee" opacity="0.12"/>
  <text x="547.5" y="783" text-anchor="middle" fill="#22d3ee" font-size="8" font-weight="600">Qwen2.5</text>

  <rect x="585" y="770" width="55" height="18" rx="4" fill="#a78bfa" opacity="0.12"/>
  <text x="612.5" y="783" text-anchor="middle" fill="#a78bfa" font-size="8" font-weight="600">Qdrant</text>

  <rect x="650" y="770" width="65" height="18" rx="4" fill="#fbbf24" opacity="0.12"/>
  <text x="682.5" y="783" text-anchor="middle" fill="#fbbf24" font-size="8" font-weight="600">Streamlit</text>

  <rect x="725" y="770" width="55" height="18" rx="4" fill="#3b82f6" opacity="0.12"/>
  <text x="752.5" y="783" text-anchor="middle" fill="#3b82f6" font-size="8" font-weight="600">Docker</text>

  <rect x="790" y="770" width="65" height="18" rx="4" fill="#3b82f6" opacity="0.12"/>
  <text x="822.5" y="783" text-anchor="middle" fill="#3b82f6" font-size="8" font-weight="600">NVIDIA RT</text>

  <rect x="865" y="770" width="55" height="18" rx="4" fill="#3b82f6" opacity="0.12"/>
  <text x="892.5" y="783" text-anchor="middle" fill="#3b82f6" font-size="8" font-weight="600">CUDA</text>

  <!-- ============================================================ -->
  <!-- LEGEND                                                        -->
  <!-- ============================================================ -->
  <rect x="80" y="825" width="1040" height="52" rx="8" ry="8" fill="#0a0e1a" stroke="#1e3a5f" stroke-width="0.6" opacity="0.5"/>
  <text x="100" y="843" fill="#475569" font-size="9" font-weight="700" letter-spacing="1.5">LEGEND</text>

  <!-- GPU Service -->
  <rect x="180" y="835" width="14" height="14" rx="3" fill="url(#pinkNodeGrad)" opacity="0.7"/>
  <text x="200" y="847" fill="#94a3b8" font-size="9">GPU Service</text>

  <!-- CPU Service -->
  <rect x="300" y="835" width="14" height="14" rx="3" fill="url(#orangeNodeGrad)" opacity="0.7"/>
  <text x="320" y="847" fill="#94a3b8" font-size="9">CPU Service</text>

  <!-- Vector DB -->
  <rect x="420" y="835" width="14" height="14" rx="3" fill="url(#purpleNodeGrad)" opacity="0.7"/>
  <text x="440" y="847" fill="#94a3b8" font-size="9">Vector DB</text>

  <!-- VLM -->
  <rect x="530" y="835" width="14" height="14" rx="3" fill="url(#cyanNodeGrad)" opacity="0.7"/>
  <text x="550" y="847" fill="#94a3b8" font-size="9">Vision LLM</text>

  <!-- User/Client -->
  <rect x="650" y="835" width="14" height="14" rx="3" fill="url(#blueNodeGrad)" opacity="0.7"/>
  <text x="670" y="847" fill="#94a3b8" font-size="9">User / Client</text>

  <!-- Data flow legend -->
  <line x1="790" y1="842" x2="830" y2="842" stroke="#4facfe" stroke-width="1.5" stroke-dasharray="6,3" opacity="0.7"/>
  <text x="838" y="847" fill="#94a3b8" font-size="9">External flow</text>

  <line x1="930" y1="842" x2="970" y2="842" stroke="#fb7185" stroke-width="1.5" opacity="0.7"/>
  <text x="978" y="847" fill="#94a3b8" font-size="9">Internal flow</text>

  <!-- Dependency note -->
  <text x="180" y="867" fill="#334155" font-size="8">Dashed borders = service group boundary  |  Arrow direction = data flow  |  Colored labels = port mappings</text>

  <!-- ============================================================ -->
  <!-- FOOTER                                                        -->
  <!-- ============================================================ -->
  <line x1="80" y1="895" x2="1120" y2="895" stroke="#1e3a5f" stroke-width="0.8" opacity="0.4"/>
  <text x="600" y="915" text-anchor="middle" fill="#334155" font-size="9" letter-spacing="1">PIKAMATCH  &#8226;  Image Matching Pipeline  &#8226;  docker compose up --build</text>
  <text x="600" y="932" text-anchor="middle" fill="#1e3a5f" font-size="8" letter-spacing="0.5">CLIP ViT-L/14 + pHash + Qwen2.5-VL-7B-AWQ  &#8226;  RTX 5080 16 GB VRAM</text>

  <!-- Decorative corner accents -->
  <path d="M50,82 L50,75 Q50,70 55,70 L62,70" stroke="#3b82f6" stroke-width="1" fill="none" opacity="0.3"/>
  <path d="M1150,82 L1150,75 Q1150,70 1145,70 L1138,70" stroke="#3b82f6" stroke-width="1" fill="none" opacity="0.3"/>
  <path d="M50,945 L50,952 Q50,957 55,957 L62,957" stroke="#3b82f6" stroke-width="1" fill="none" opacity="0.3"/>
  <path d="M1150,945 L1150,952 Q1150,957 1145,957 L1138,957" stroke="#3b82f6" stroke-width="1" fill="none" opacity="0.3"/>

</svg>